# 功能模块

## 1 项目与任务管理

### 1.1 我的空间

创作历史（未完成灰态标记"创作未完成"，可点击继续）

|                                                              | 个人用户                                                     | 团队用户                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 功能                                                         | 创作单元沉淀：把用户一次从"输入 → 生成素材 → 剪辑 → 成片 → 导出"的完整过程，沉淀为一个可回看、可继续、可复用的"创作单元"； |                                                              |
| 让个人用户感觉自己只是"做了一次作品"，同时平台能在后台稳定记录全过程； | 让团队用户能用任务作为协作与管理的基本单位                   |                                                              |
| 进入创作                                                     | **弱管理**：不被"项目/任务"概念打扰，优先"立刻开始创作"不强提示"新建项目/新建任务"只在用户提交后，系统在后台自动创建一次创作记录（任务），并可在「我的空间 > 创作历史」中回看 | **强管理**：先明确"我在哪个团队空间创作"，再进入可管理的任务列表与协作环境可在进入创作前提供"任务/项目列表"作为组织入口但也应允许从列表中"一键发起创作"，避免流程过重 |
| 统一入口                                                     | 平台侧边栏统一入口：**「我的空间」**（同一入口位置与信息架构） |                                                              |
| 个人登录时展示为"我的空间"                                   | 团队登录时展示为"团队空间"                                   |                                                              |
| 登录后默认落点                                               | 默认进入"**输入与素材导入页面**"，突出"一句话开始创作/上传素材开始创作"提供侧边栏入口进入「我的空间」查看历史与资产 | 若仅加入一个团队空间：直接进入该团队空间的任务列表/创作入口若加入多个团队空间：登录后弹出"空间选择"浮层（最近使用置顶）→ 选定后进入对应空间若用户不在任何团队：提示"未加入团队"，提供输入邀请码加入或继续个人空间创作 |
| 任务创建时机                                                 | 当用户在创作入口点击【提交生成】（进入生成素材管理）时，系统自动创建一个"创作单元" |                                                              |
| 用户不需要先显式"新建项目/新建任务"（尤其是个人用户），避免创作负担 | 团队空间中可在任务列表显式展示"新建任务"（满足管理心智），但底层仍然是同一机制 |                                                              |
| 删除/清理                                                    | 提供删除（或隐藏）入口，但需提示影响："删除后将无法回看该次创作的素材与导出文件" |                                                              |

- **空间加入与切换**
  - 团队加入方式：输入团队邀请码（在登录后或个人空间内均可提供入口）
  - 切换空间：
    - 在侧边栏的空间区提供下拉切换，"最近使用"置顶展示
    - 切换后，创作历史、历史记录、资产库随空间切换
- **登录与使用过程中的****异常与兜底**
  - 邀请码错误/过期：提示"邀请码无效，请重新输入"，提供重新输入
  - 未加入团队：提示"未加入团队空间"，提供"加入团队/继续个人创作"
  - 空间切换失败/加载失败：提示"切换失败，请重试"，不丢失当前创作内容
  - 权限不匹配（团队）：提示"无权限访问该空间"，引导联系管理员或切换空间

### 1.2 "我的空间"中的"创作单元"

- 用户点击"创作单元"后可回看内容：
  - 输入内容（文本/附件引用/选择的资产）
  - 偏好配置（时长/画幅/语言/字幕等用户已定义的可见项）
  - 生成素材阶段：素材包序列（阶段性结果）
  - 剪辑阶段：成片草稿（时间轴）与分镜候选选择结果
  - 成片与导出：可预览的成片结果、导出记录与可下载文件
- 创作单元内的版本管理：
  - 平台允许用户在单次创作内产生多次素材包版本（素材候选/分镜候选/成片候选）
  - 用户最终导出时选择"当前采用/当前成片结果"
  - 不强行引入复杂"版本对比/一键回退"系统；回看与选择主要靠：
    - 生成素材阶段：素材包沉淀与切换
    - 剪辑阶段：候选并存 + 选择即生效
    - 导出阶段：导出记录可再次下载
- 创作单元的基础信息
  - 默认命名：
    - 系统可基于输入主题自动命名（降低空白负担）
  - 任务摘要信息（用于列表呈现）：
    - 最近更新时间
    - 当前阶段状态（如：生成素材中/剪辑中/已可导出）
    - 关键规格摘要（如时长/画幅/语言）
  - 用户可编辑：
    - 任务名称（个人可选，团队建议支持）
    - 任务备注/用途（团队可选，个人可不做）
- 创作单元的任务状态与"继续创作"
  - 任务至少区分几个用户可理解的阶段状态
    - 未完成（例如生成中途退出）
    - 进行中（生成素材/剪辑中）
    - 已完成（已生成成片）
    - 已导出（存在导出文件记录）
  - 对"未完成任务"提供明确的继续入口：
    - 在"我的空间/创作历史"中灰态标记"创作未完成"
    - 点击进入后回到上次所在阶段（生成素材页/剪辑页），继续推进

### 1.3 组织与检索

|                    | 个人用户                                                     | 团队用户                                                     |
| ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **任务组织方式**   | 更侧重"创作历史"与"我的空间"的管理，任务列表简单，以时间倒序呈现用户无需关注复杂的任务分类，只需关注已完成或正在进行的创作简单的任务筛选与回看功能：通过时间、状态标识等方式进行快速浏览与检索 | 任务组织为工作区（空间）的一部分，每个团队空间下拥有多个任务提供任务归类功能，如标签、状态（进行中、已完成、已导出等）与优先级排序支持项目化管理（任务在空间内可分组、分类），适合长期和多维度的任务协作与跟进任务可通过成员分配与协作权限进行管理（可见、可编辑、可导出） |
| **任务筛选与检索** | 只需要简化的检索方式，基于任务名称和创建时间快速检索已完成的任务支持通过"已完成"与"未完成"状态进行任务分类查看，便于回顾创作进度 | 提供多维度筛选功能：按任务状态、标签、创建时间、优先级等多重条件进行筛选任务支持按**项目/小组**进行分组展示，方便查看同一项目下的多个任务支持快速检索功能，允许团队成员通过关键词（如任务名称、标签）查找历史任务 |
| **任务展示与呈现** | 任务列表仅展示最核心的信息，如任务名、状态、创建时间不引入复杂的管理界面，简化为"我的历史创作记录"，提供回顾与继续创作的快捷方式 | 任务列表展示关键信息（如任务名称、当前状态、负责人、截止日期等）任务支持**批量操作**（如批量修改状态、删除任务等），适合大团队管理 |
| **任务管理权限**   | 个人空间下，默认所有任务由自己掌控，不涉及复杂权限控制用户可自行管理"我的历史任务"与"待办任务" | 任务创建时，团队管理员可分配成员角色与权限（如编辑、查看、导出等权限）团队成员可以根据权限参与创作：如是否能修改任务内容、是否可以导出成片管理员可查看所有成员的任务进度，支持为某个任务指派负责人对团队任务提供**配额展示与管理**（如每日最大任务数、生成配额等） |

## 2 输入与素材导入

承接用户的创作意图与外部素材输入，支持多种输入形态（文本/剧本/文件等）并保证后续生成可用。

### 2.1 输入模式

用户能够根据自己的创作需求灵活选择输入方式：对普通用户提供简单易用的通用输入模式，对专业用户提供更高效的专业输入模式

|                                                              | 通用模式                                                     | 专业模式                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 模式切换                                                     | 在输入框上方，有一个toggle 按钮，用户可点击切换"通用模式"或"专业模式"，平台会根据模式切换调整相应的输入框内容和可选项。 |                                                              |
| 划分原则                                                     | 适合普通用户或快速创作的场景通过简单的文本输入或指令提交，用户只需要提供一句话或一段简短描述，平台会自动解析并生成相关视频素材目标：简化创作流程，让创作不需要复杂的背景知识和技能，适合内容简单、情节简单的视频生成需求 | 适合更高阶的创作需求，提供更多自定义选项和细节控制允许用户上传剧本、分镜大纲、场景描述等文档，支持高级功能，如更详细的情节设定、角色细节、场景描述等目标：满足专业创作者或需要更精细控制视频输出质量的用户，适合内容复杂、需要细节呈现的项目 |
| 输入                                                         | **用户交互**：通过单一输入框，用户只需提供一段简短的文本（如一句话或简短描述），描述想要的短片或视频内容。示例：用户输入"一个女孩在海边散步，阳光明媚"。输入框下方提供"自动生成"按钮，用户点击后，系统根据输入内容自动生成视频。**系统反馈**：系统将基于输入内容自动解析关键要素，选择相关的素材库（如场景、角色、风格、音效等）。在后台，平台通过预设的模板和智能推荐生成视频的分镜、故事线和基础素材，减少用户输入负担。**用户可见规则**：输入的内容直接映射到视频生成的核心要素（如场景、角色）。输入文本内容的长度不作硬性限制，但建议简洁明确，以便平台更好地解析意图。 | **用户交互**：提供更加复杂的输入框，用户可以上传剧本、分镜文件或自定义描述文档，详细描述每个场景、每个角色、音效、情节发展等。用户可以选择通过文本、附件或上传文件（如Word文档、PDF）等方式输入内容。输入框下方提供"开始创作"按钮，用户点击后，平台将根据上传的素材或文档生成详细的创作计划，并提供可视化编辑功能。**系统反馈**：系统根据用户上传的剧本、分镜文件等，分析内容并自动生成分镜草稿、场景设置、角色设定、旁白台词等。用户可以实时查看生成的初步素材，并根据需要进行调整和优化。提供一键导入历史任务或模板功能，用户可以快速在历史项目基础上进行编辑和修改。**用户可见规则**：专业模式允许更多的自定义选项，例如选择视频的拍摄风格、镜头类型、角色形象等。文本输入和文件上传功能都将解析为视频内容的基础设置，用户可以进行进一步修改和完善。 |
| **平台提示与支持**                                           | 平台会在用户输入框下方提供简单的模板或示例，帮助用户理解如何简洁地描述他们的创作意图。 | 平台会提供丰富的文档解析工具和范本，帮助用户正确上传剧本、分镜文件等内容，确保用户输入符合视频生成的规范。 |
| 提供实时的输入验证与提示（如"内容过长，建议简化"，"请选择合适的文件格式"）以帮助用户顺利完成创作。 |                                                              |                                                              |

### 2.2 文本输入与提交交互

- **文本输入框设计与用户引导**
  - 提供一个清晰的文本框，用户可以在其中输入创作意图或短片描述。
  - 在文本框内提供**占位符文本**（例如："输入你想要生成的视频描述"），帮助用户理解预期的输入形式。
  - 在用户开始输入后，占位符文本自动消失，防止干扰实际输入。
- **字数展示与反馈**
  - **实时字数计数**：
    - 输入框旁边实时显示当前输入字数，帮助用户了解自己已经输入的字数。
    - 字数上限与建议字数范围应明确显示，例如："字数：50/100字"（展示当前字数/最大限制字数），让用户知道他们的输入是否符合规定。字数下限3个字，上限10000字。
    - 若用户接近或超过最大字数限制，提供轻提示，如"字数已接近上限"或"请精简您的输入"，避免用户提交过长的描述。
    - 在用户输入内容超过最大字符数限制时，给予提示并建议用户修剪输入内容，如"输入内容已超过最大字数，当前字数为150，请减少至100字以内"。
- **提交按钮状态与交互**
  - 文本框右侧为"提交"按钮，初始状态为**不可点击**，置灰，直到用户输入达到最小字数要求（3个字以上）。
  - 用户输入满足字数要求后，按钮变为**可点击**状态，用户可以点击提交按钮提交创作意图。
  - 点击提交后，按钮变为**加载中**状态，并显示"提交中..."，防止用户重复提交或产生混乱。
- **提交后系统反馈——进入下一页面**
  - 提交成功后，进入"**生成素材管理**"页面；在左栏对话框中，以用户和系统对话的形式，输出"您的创作意图已提交，正在生成素材"；
  - 生成todolist，一步一步完成，并在中间栏流式输出素材内容；

### 2.3 输入框下方配置项

- **与生成素材管理阶段的关系（实时影响生成结果）**
  - 每次用户在输入文本或上传附件后，平台会自动应用所选的生成偏好配置来指导素材生成和后续编辑过程：

|                                                              | 文件上传                                                     | 模型选择                                                     | 添加主体                                                     | 选择风格                                                     | 画幅                                                         | 时长                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 定义                                                         | 上传生成角色或者场景时的参考图；上传剧本的不同格式的文件；   | 模型不同，效果不同。                                         | 保持多次视频创作过程中主体的稳定性与一致性。                 | 影响素材的色调和视觉效果，影响模型生成时的素材风格和质感。   | 影响最终生成的分镜尺寸和视频输出的格式，使其适应不同的播放平台。 | 视频的总时长，决定素材的分配与生成比例，影响视频中素材的使用量与节奏。 |
| 选择方式                                                     | 文件上传框                                                   | 下拉框                                                       | 下拉框+输入框                                                |                                                              |                                                              |                                                              |
| 模型选择一共在两个环节：输入环节选择生图模型和在剪辑与编排界面选择生视频。在此环节，分两栏：文生图模型和图文生图模型。每一栏提供多个模型选择，并作模型标注，每个模型为一个图标；支持模型智能选择 | 风格示例展示样图为方形，在下方标注风格名称；单击出现弹窗，弹窗内选择风格；鼠标点击弹窗外界面关闭该弹窗；右上角提供筛选框：主体：年龄、性别； | 简单下拉框即可：每个格式占据一行，选中时右侧出现小悬浮格子："当前选择"并通过图示或示例展示每种画幅的显示效果。 | 默认选择"智能"，单占一行，模型智能生成时长；如用户不操作，也选为"智能"下拉框，提供几个基本时长选择，并允许用户输入特定时长；下拉框默认时长为5的整数：XX秒；超过1分钟显示为：XX分XX秒，每个选项各占一行；用户输入，单占一行。 |                                                              |                                                              |                                                              |
| 下拉框内容                                                   | 🈚️                                                            | 待定                                                         | 待定                                                         | 1.泡泡玛特2.动森风格3.卡通 3D4.迪士尼5.乐高风格6.低模风格7.吉卜力8.真人摄影9.黏土风格10.史努比风格11.线性插画风格其实每个画风对应的是一个prompt，用户应该可以自定义添加画风选择。 | 1️⃣16:9日常自然的感觉，减少了大片感，增加了日常感。2️⃣4:3多用于早期电影和电视节目，给人一种"复古""学院派"的感受。3️⃣2.35:1这种比例被称为"cinemaScope"或"宽荧幕"，主要用于大型电影制作和大片。4️⃣19:16伴随短视频平台兴起而走红的竖屏视频，很难进行严肃性创作，但是可以极大拉近观众的距离。 | 5秒10秒15秒20秒...60秒1分05秒...2分钟；...自定义：[_]小时[_]分[_]秒（需要添加格式审查，如分钟和秒需<60，小时设置一个上限或者弹出提示） |

- **配置交互与用户体验直观选择界面**：
  - 所有生成偏好配置（风格、时长、画幅、字幕等）集中展示在一个清晰的界面中，提供简洁明了的下拉菜单、按钮、图标等交互方式。
  - 每个设置项都有简短的描述或示例，帮助用户快速理解选择的影响。
  - **实时预览与反馈**：
    - 在用户选择风格、时长、画幅等选项时，界面下方实时更新显示预览图或预估效果，帮助用户确认配置是否符合创作需求。
    - 对于时长设置，提供实时调整的方式，如滑块或输入框，并显示"视频内容将根据时长自动调整"的提示。
- **配置同步与任务记录（保存和复用）**
  - **自动保存配置**：
    - 用户每次选择的配置会自动保存为任务的一部分，方便用户在不同创作之间保持一致性。
  - **配置历史与复用**：
    - 用户可以选择将当前的配置保存为"模板"或"常用设置"，以便在未来任务中快速应用。
    - 提供"常用配置"选项，帮助用户快速选择已保存的配置，避免重复设置。

### 2.4 附件导入与参考绑定（上传 / 类型标注 / 解析反馈）

- **附件导入**
  - **上传方式**：
    - 提供多种文件上传方式，支持拖拽上传、点击选择文件；
    - 用户可上传多种格式的附件（如图片、音频、视频文件、PDF、Word、Excel、TXT等），确保覆盖创作过程中可能涉及的所有文件类型。
    - 上传过程中，每个文件在输入框下方出现进度条，显示上传进度，用户可以实时看到每个文件的上传状态。
  - **文件大小与格式提示**：
    - 每个文件上传时，平台会显示格式要求与文件大小限制（例如"支持JPG、PNG格式，最大10MB"）。
    - 若上传失败，系统提供清晰的错误信息，指导用户修正（例如："文件格式不支持，请上传JPG或PNG格式"）。
- **附件类型标注**
  - **自动标注与手动标注**：
    - 用户上传的附件会自动根据文件类型进行初步标注（如图片、音频、视频、文档等）。
    - 除了自动标注外，平台还提供手动标注功能，用户可以为附件添加具体标签或描述，明确该文件在创作中的作用（如"角色形象参考"、"场景设计图"、"背景音乐"等）。
  - **标注方式**：
    - 上传的附件会显示标注按钮，用户点击后可填写详细描述，并为每个附件添加自定义标签。
    - 附件在界面中显示时，会展示该标注信息，确保用户快速识别文件用途。
  - **标注例子**：
    - 图片：标注为"角色设计图"或"背景图"；
    - 音频：标注为"角色语音"或"背景音乐"；
    - 文档：标注为"剧本"或"分镜大纲"。
- **附件绑定与素材使用**
  - **绑定附件与创作元素**：
    - 用户可以将上传的附件与具体创作任务中的元素绑定。例如，将一张"角色形象图"与"角色"绑定，将一段音频与"旁白"绑定。
  - **绑定方式**：
    - 对于图片，用户可以在素材管理界面直接点击上传的图片，将其与角色、场景等元素关联。
    - 对于音频，用户可以在音频设置界面选择上传的音频文件，将其绑定到分镜或角色旁白。
    - 对于文档，用户可以将剧本或大纲文件绑定到创作过程中的文本生成或分镜生成环节，系统根据文档内容智能推测每个部分应如何应用。
- **异常与错误处理（友好的提示与纠错）**
  - **上传失败**：
    - 若上传失败，系统将提供具体的错误提示，例如："文件格式不支持"或"文件过大"，并给出操作建议（如"请压缩文件并重试"）。
    - 用户重新上传后，系统将自动更新文件的状态并重新解析。
  - **附件绑定失败**：
    - 如果用户上传的附件无法与创作元素正确绑定（如音频格式不匹配或文档解析失败），系统会显示"绑定失败"提示，并提供可操作的解决方案（如"请检查附件格式"）。

## 3 生成素材管理

承接系统生成的中间素材结果，提供统一的查看、预览、筛选、对比与选择，形成可用于成片的"素材集合"。

### 3.1 左栏-任务拆解与进度反馈

- **对话触发**
  - 用户在「输入与素材导入」完成提交后，自动进入"生成素材管理"页面并开始生成流程
  - 用户在当前素材包内发起"重新生成/修改后生成"时，同样触发该流程；系统在左栏"用户和系统对话框"内显示
- **任务拆解呈现（To-do / 步骤清单）**
  - 页面以固定的步骤清单呈现本次生成的结构化任务（与中间栏的 5 类素材一一对应），默认包含：
    - 构建短片的核心故事线和情节
    - 定义整体视觉风格和美术细节
    - 设计短片中登场的角色形象
    - 规划短片中的场景布局和元素
    - 绘制详细的分镜图和镜头描述
  - 支持步骤折叠/展开（默认展开），便于用户快速扫一眼进度
  - 每一步可点击跳转至中间栏对应内容位置（若该步已产生可展示内容）
- **进度状态反馈（用户可见）**
  - 每一步显示清晰的状态标记（不暴露技术细节）：
    - 未开始：灰色/空心状态
    - 进行中：加载态（转圈/进度动效）
    - 已完成：绿色对勾
  - 整体进度在步骤清单顶部提供一句话概览（可选）：
    - "正在生成第 X/5 步：……"
- **实时流式输出**
  - 某一步完成后，中间栏对应模块自动出现/更新内容
  - 用户在等待过程中可以先浏览已完成的模块内容；未完成模块展示占位骨架屏/提示"生成中"
- **失败与可恢复路径（只写用户可见）**
  - 若某一步生成失败：
    - 该步标记为"失败"并展示可操作提示（不暴露失败原因细节）
    - 提供【重试本步】的明确入口（优先）
    - 同时保留【跳过本步继续】
  - 若整体生成失败/中断：
    - 页面提示"本次生成未完成"，并给出【一键重试】入口
    - 已完成步骤的结果保留可见（不清空），避免用户"白等"
  - 网络/超时类问题：
    - 统一提示"网络异常/生成超时，请重试"，提供重试按钮

### 3.2 左栏阶段性成果展示-素材包沉淀与切换

- **素材包定义**
  - 素材包 = 用户在"生成素材管理"阶段得到的一份**阶段性可用结果快照**，包含本轮生成后的结构化素材集合（故事梗概/美术风格/角色/场景/分镜等），包括右栏对素材包内素材进行元素级微调的版本结果，以及系统对本轮修改意图的总结
- **入口/触发**
  - **首次进入生成素材管理页面并完成一轮生成**后，自动生成 1 个素材包（作为初始版本）
  - 后续在同一创作中，用户进行多次局部修改/重生成时：
    - 修改默认作用于"当前素材包的工作态"（不立即生成新素材包）
    - 当用户点击【保存为新版本】或在关键节点触发"阶段性确认"（如【进入剪辑/生成视频】前的确认）时，生成新的素材包
  - 用户可继续在最新素材包基础上迭代，形成包序列
- **素材包命名与列表呈现**
  - 素材包在左侧"创作过程/版本"区域以对话形式呈现在对话框中，按照时间倒序，最新生成的在最下方
  - 每个素材包展示最小必要信息：
    - 自动生成的简短名称（默认：从本轮主题/故事核心词抽取）
    - 生成时间
  - 支持用户对素材包重命名
- **切换与生效规则**
  - 点击某个素材包即切换当前工作区到该素材包：
    - 中间栏展示该素材包对应的结构化素材内容
    - 右侧修改面板的"当前选中对象"上下文切换到该素材包
  - 切换素材包后，用户的后续修改默认基于"当前选中的素材包"进行
- **素材包内容边界**
  - **包含：**
    - 结构化中间素材：故事梗概、美术风格、角色列表（默认选择为上次查看的最终版本）、场景列表（同上）、分镜剧本等
    - 与该素材包关联的"系统总结"（对本轮主要修改点的概括，用于左栏叙事记录）
    - 每一次右栏元素级微调产生的素材版本历史
- **候选与"最终采用"的沉淀规则**
  - 对于同一对象（如某个角色形象图/某个场景图/某个音色）：
    - 编辑过程中允许多个候选并存供对比查看
    - 素材包沉淀时保留历史版本（默认以用户最后查看/显式点击为准）
  - 素材包沉淀后的内容用于后续剪辑与编排阶段的生成与引用
- **生成素材包前的"阶段性总结"**
  - 用户在中间栏/右栏完成多次局部元素级修改后，系统在生成新素材包时自动生成一条"本轮变更摘要"：
    - 以用户可读的语言概括本轮主要修改（不逐条罗列微操作）
    - 作为左栏"创作过程记录"的一条条目
- **未完成/中断场景**
  - 若用户在生成过程中离开或中断：
    - 在素材包列表中保留一个"未完成"状态的条目（灰态 + 标识）
    - 用户返回后可在左栏对话框，点击继续生成/重试
    - 未完成素材包不进入"可用于剪辑"的默认选择（可提示用户先完成生成）

### 3.3 中间栏-素材结构化展示与候选并存（文本 / 图像 / 音色）

- **展示结构**
  - 中间栏按固定小标题分段展示，包含：
    - 故事梗概（文本）
    - 美术风格（文本 + 风格参考图如有）
    - 主体列表（角色：图片 + 文本描述 + 音色）
    - 场景列表（场景：图片 + 文本描述）
    - 分镜剧本（文本为主，可附分镜参考图/镜头示意如有）
  - 中栏侧边提供小标题锚点，点击跳转到对应分段；滚动时高亮当前所在分段
  - 每个分段在未生成完成时展示骨架屏/占位提示"生成中"，完成后自动回填内容
- **数据对象与承载方式**
  - 文本类对象：故事梗概段落、美术风格描述、分镜条目（镜头描述/旁白台词/动作等）
  - 图像类对象：角色形象图（如三视图/主视图）、场景图、风格参考图（如有）
  - 音色类对象：角色音色、旁白音色（以名称 + 喇叭试听为主）
  - 列表结构：角色列表/场景列表/分镜列表均为可展开的条目集合，用户能明确"有多少个、每个是什么"
- **候选并存机制**
  - 对于可重生成的对象（角色图/场景图/音色推荐/关键文本段落）：
    - 每次右栏微调后，重新生成产生"新候选"，**不覆盖旧候选**
    - 同一对象下候选以横向卡片/轮播形式并排展示，便于对比
    - 候选展示最小信息：缩略图/片段预览 + 生成时间（或"新/上一版"轻标签）
  - 候选数量控制（避免无限堆积）：
    - 默认只展示最近 4个候选，超出后折叠为"更多…"
    - 允许用户手动删除某个候选（可选，可先不做删除，只做折叠）
- **"选择即生效"的采用规则**
  - 用户不需要额外点击"确认采用"
  - 采用规则为**显式采用**：用户点击候选卡片 → 出现✅"已选中"标签（推荐，更确定）
  - 当前采用的候选在该对象区域内始终可见，并在进入下一阶段（剪辑与编排阶段）时作为默认输入

- **候选对比与预览**
  - 图片候选：
    - 默认缩略图展示，点击放大预览
    - hover可展开"生成描述提示词"（只读），便于理解差异（不要求用户编辑prompt），用户点击后可以在右栏进行图像编辑。
  - 音色候选：
    - 以"名称 + 喇叭试听"展示；点击试听播放示例
    - 支持"换一换/切换"生成或推荐新候选（若支持），同样进入候选并存
  - 文本候选（如关键段落/分镜条目）：
    - 以段落卡片形式展示候选
- **与"资产库"的联动**
  - 角色/场景/音色条目提供"从资产库选择替换"的入口（如按钮/下拉）
  - 从资产库替换后作为"新候选"加入候选区（同样遵循不覆盖规则）

### 3.4 右栏-元素级修改与微调

- **能力定位**
  - 用户不需要"重写整段 prompt"或"对整个素材包提一条笼统意见"，而是可以**直接对某一个具体对象提出修改**（一段文字 / 一张图片 / 一个音色条目等）
  - 系统负责把用户的修改意图转化为可执行的重生成，并在必要时自动联动更新相关内容；**不要求用户判断影响范围**、不让用户做"范围选择"
- **可被选中并修改的对象范围**
  - **文本对象**：故事梗概段落、美术风格描述片段、角色/场景的文字设定字段、分镜条目（镜头描述/旁白台词/动作等）
  - **图像对象**：角色形象图（主视图/三视图）、场景图
  - **音色对象**：角色音色、旁白音色（以"试听 + 切换"为主，不做音色重生成）
  - 说明：BGM 属于剪辑与编排阶段处理；本模块只处理"角色/旁白音色"的选择与替换
- **交互总原则**
  - **中间栏负责"选中对象"**：用户在结构化素材展示中点击/框选某个对象
  - **右栏负责"提出修改 + 触发重生成"**：右栏始终围绕"当前选中对象"展开，不出现复杂配置表
  - **结果以候选并存呈现**：每次修改产生新候选，不覆盖旧结果，用户可回看并回选（与"候选并存/选择即生效"规则一致）
  - **系统承担联动复杂性**：若某次修改会引起后续素材调整，系统自动处理并通过简洁方式告知结果（不让用户决策范围）
  - - 其实没想好怎么联动后续素材调整。
- **入口/触发**
  - **文本**：在中间栏对某段文字进行框选/点击段落卡片 → 进入右栏编辑，支持两种方式：一种是点击在右栏出现的"段落卡片"，直接编辑并点击"保存"；另一种是在输入框"提交修改意见"，提交后重新生成；
  - **图片**：点击缩略图/候选卡片 → 进入右栏"改图"面板（支持查看生成描述/提示词），对图片的编辑实际上就是对生图的提示词的编辑，同文本编辑。
  - **音色**：点击喇叭试听区域或"换一换"入口 → 在右栏打开音色切换（从资产库中选择，系统默认提供几种音色）
- **右栏内容结构**
  - 右栏只包含三块信息（避免复杂面板）：
    - **当前对象展示**：显示被选中的文本片段/图片大图/音色名称（+试听按钮）；如果是图片，将图片与生图提示词分开展示；
    - **修改输入区**：一个主输入框（占位符统一："请输入你的修改意见，例如：更成熟/更写实/换成夜景/语气更轻松"）
    - **操作按钮**：
      1. 文本/图片：
         - 文本 → 【保存】
         - 生图提示词 → 【保存并重新生成】
         - 文本、图片（也就是生图提示词） → 【提交修改意见】
      2. 音色：默认【换一个音色】+ 可选【从资产库中选择】
- **系统自动联动的呈现方式**
  - 当用户修改某对象后，系统可能自动更新相关模块内容（例如改角色→分镜台词/镜头描述同步变化）；若某对象被后续模块引用（例如角色形象影响分镜描述/镜头提示），系统以"当前采用版本"为唯一输入来源
    - 典型场景：
      - 修改故事梗概的一句话 → 系统可能同步修正后续分镜中的对应设定（自动完成）
      - 修改某个角色性格描述 → 系统可能同步调整该角色在分镜中的台词风格（自动完成）
    - 对用户的呈现方式：以"结果变化"体现联动，而不是让用户先做范围决策
  - 用户侧的反馈方式建议使用"轻量可解释"而非决策：
    - 在本次修改完成后给一条提示："已根据你的修改同步更新XXX"或"已更新：角色设定、分镜剧本（2处）"→ 此处是否可以是类似于"拍一拍"那种灰色的偷偷的显示在左栏？展示微操作
  - 用户无需确认范围；若用户不满意，可继续基于新结果再次局部修改（产生新候选）
  - 若当前采用候选被删除/不可用（若支持删除）：自动回退到最近一次可用候选，并提示"已为你切换到可用版本"
  - 当候选被采用时，提供轻量反馈（不弹窗打断）：
    - 候选卡片出现✅标记
    - 在对象标题右侧显示"当前使用：xxx"（可选）
  - 若用户在不同候选间切换，✅标记随之移动，始终只有一个候选被标记为"当前使用"
- **与素材包的关系（避免版本爆炸）**
  - 多次元素级修改不会自动生成新素材包
  - 当用户点击【保存为新版本】或进入下一阶段（剪辑与编排）触发阶段性确认时：
    - 系统将当前采用的对象集合沉淀为新的素材包
    - 同时在左栏生成一条"本轮修改摘要"（总结主要修改意图，不列微操作）
- **异常与兜底（合并写法，只保留用户可见）**
  - 生成失败：在对象候选区提示"生成失败，请重试"，提供【重试】按钮
  - 结果不可用/不满意：用户可继续输入修改意见再次生成候选（不要求回退/撤销）
  - 资源/额度不足（若该步计费）：提示"余额不足，无法生成"，给出充值/购买入口（若本阶段不计费则不出现）

## 4 剪辑与编排

### 4.1 分镜编排成片，用户可直接预览视频

- **入口/触发**
  - 在生成素材管理页面，用户点击【生成视频】进入剪辑与编排页面
  - 进入时默认加载"当前素材包的最终采用版本"（角色/场景/风格/分镜文本等以素材包沉淀结果为准）
- **自动生成可播放的视频草稿**
  - 系统基于分镜列表（文字）自动构建一条"成片草稿时间轴"（图片版）：
    - 每个分镜对应一个片段（Clip）
    - 默认时长：每个分镜 5s（可在后续调整）
    - 默认顺序：按分镜剧本顺序排列
  - 系统在页面主预览区提供"整片预览"，用户可一键播放查看节奏与连贯性
  - 用户无需理解生成过程细节，只需看到：**已自动生成一个可以播放的初稿（每一个片段实际上仍然是分镜画面）**
- **时间轴展示（可切换视图）**
  - 页面底部为时间轴区域，按时间顺序展示分镜片段缩略（图片/视频封面）：
    - 每个片段展示：分镜编号/缩略图/时长标记（例如 5s）
    - 当前播放位置以播放头（Playhead）显示
  - 时间轴支持长视频横向滚动（无需分页），保证用户可连续浏览所有分镜
  - 支持点击任一分镜片段：
    - 主预览区跳转并聚焦到该分镜（分镜画面（主预览区）/文本信息（左栏编辑栏）同步切换）
    - 时间轴高亮该片段，形成明确的"当前位置"感
  - 在时间轴区域支持两种查看方式，两种视图共享同一套选中状态与播放定位，避免用户迷路
    - **时间轴视图**：适合节奏与时长调整
    - **故事面板视图**：以卡片/格子并排查看每个分镜，适合快速检查叙事连贯与画面一致性
  - 每个分镜片段在时间轴上有清晰的形态标识：
    - 当前片段来源：图片片段 / 视频片段，以小图标区分
- **主预览区**
  - 主预览区默认展示"整片预览"，按时间轴顺序播放
  - 当用户选中某个分镜：
    - 左栏显示当前分镜的关键信息：分镜的内容，生图prompt
    - 主预览区有对分镜的视频片段单独播放的按钮
- **异常与兜底**
  - 若某些分镜片段暂未生成成功：
    - 该分镜以占位缩略显示并标记"待生成"
    - 不阻断用户预览已生成部分

### 4.2 分镜图生视频，支持用户选择模型

- **触发场景**
  - 针对单个分镜片段，用户对单个分镜图片，在左栏触发`生成视频`
  - 针对全片，用户直接点击右上角`一键生成视频`按钮，对未单独生成视频的分镜，一起生成视频
  - 模型选择仅在点击`生成视频`和`一键生成视频`时以弹窗的方式出现，不打扰用户浏览时间轴与基础剪辑操作
- **模型选择**
  - 窗中以轻量浮层/抽屉展示可选模型列表：
    - 每个模型卡片展示：
      - 模型名称
      - 适用标签
      - 预计消耗（额度/积分）
- **视频的候选并存与对比**
  - 每次生成的视频，作为该分镜的**新视频候选**并存展示，不覆盖旧候选；在主预览区的主画面右侧以缩略图的形式展示，点击切换；点击某候选卡 → 显示✅"当前使用"
  - 当前使用的候选会同步体现在时间轴该分镜片段上（封面/标记更新）
- **成本/额度提示**
  - 在用户点击`生成视频`时展示预计消耗：
    - "本次生成将消耗 X 积分或额度"
    - 余额不足时阻断并提供可操作路径（充值/购买会员）

### 4.3 分镜画面修改，用户在左栏提意见并重新生成/选择生成视频

- **对象范围**
  - **分镜图片**：用于分镜的静帧画面，可作为生成视频的基础
  - **分镜视频**：用于该分镜在成片中的动态片段，可由图片生成视频产生

- **入口/触发**
  - 用户在时间轴/故事面板选中某个分镜后，在主预览区显示分镜画面或视频：
    - 左栏显示生成分镜画面提示词，用户可修改或提意见，点击`重生成`，满意后点击`生成视频`
    - 视频同理，显示生成视频提示词，用户可修改或提意见，`重生成`，不满意可以`重新生成`
  - 在左栏生成的多个图片和视频，右上角提供一个按钮`应用`，用户点击来确定该分镜对应的画面和视频；如未点击，则默认应用最新生成的分镜画面或视频
  - 多个图片和视频，在主预览区的右侧，以缩略图的方式上下翻动切换，画面和视频各一栏（待定）

### 4.4 分镜画面编辑，裁剪、片段长度、画面形态

- **操作对象与范围**
  - 最小编辑单元为"分镜片段 Clip"
  - 用户在时间轴/故事面板点击某个分镜片段 → 主预览区展示画面 → 画面上方显示画布编辑
- **片段长度调整**
  - 每个分镜片段有默认时长（如 5s），用户可在时间轴上直接调整该片段长度：
    - 拖拽片段左右边界改变时长（可视化显示时长数值）
    - 支持吸附到常用档位
  - 调整时长后：
    - 片段长度在时间轴上实时变化
    - 主预览区播放该分镜时按新时长生效
  - 与旁白的关系：
    - 若当前分镜旁白时长明显超过片段时长，给予轻提示："旁白可能播放不完整，建议延长片段或精简台词"
- **画面形态切换（图片/ 视频）**
  - 同一分镜片段支持两种表现形态：
    - **图片片段**：静帧 + 时长
    - **视频片段**：该分镜对应的视频候选
  - 用户可在分镜详情区一键切换当前采用形态：
    - 若尚无视频候选，切换到视频形态时引导【生成视频】
  - 当前采用形态会同步反映在时间轴缩略上（例如小图标标识"图/视频"）

> 这里还在考虑是否支持调整画面形态，还是只输出视频呢？

- **异常与兜底**
  - 调整时长的异常（如过短/过长）：
    - 给出限制提示（例如"最短 1s / 最长 15s"

### 4.5 分镜音频处理，旁白、对话和BGM

- **音频结构**
  - **分镜级**：旁白/台词（TTS 生成，随分镜走），旁白全片统一音色，对话全片保持角色音色一致；
  - **全片级**：BGM（一首或一条主背景音乐，覆盖全片）
- **入口/触发**
  - 用户在时间轴选中某个分镜片段 → 在左栏点击`配音`和`音乐`配置。

#### 4.5.1 `配音`：包含旁白和对话：

- **旁白配置**
  - **旁白文本编辑**
    - 用户选定分镜时，左栏点击进入配音即可见：当前旁白，支持直接编辑
    - 提供字数/时长的实时反馈：一秒钟4个字
    - 支持用户上传自定义配音音频，此时是否需要添加语音识别？
  - **音色选择**
    - 默认系统为该分镜推荐一个音色
    - 用户可通过【换音色】入口切换：
      - 推荐列表：系统给若干可选项
      - 音色与 BGM 均支持从"资产库的音色库"中选择，形成资产复用
    - 音色以"名称 + 喇叭试听"呈现，试听不打断主预览，固定朗读内容
  - **轻量参数调节**
    - 语速（滑杆）
    - 音量（滑杆）
    - 情绪（限定枚举：平静/开心/严肃等）
  - **应用方式**
    - 用户在当前面板内完成编辑后，点击`应用修改`才更新该分镜的旁白音频
    - 应用后主预览区可立即试听当前分镜效果：同时播放分镜画面和旁白
  - **旁白的边界提示**
    - 当旁白预估时长明显超过当前分镜片段时长：
      - 给出轻提示："旁白可能播放不完整，建议延长分镜或精简台词"
      - 不强制阻断用户继续编辑
    - 用户可自行选择：去调整分镜时长或精简旁白文本

#### 4.5.2 音乐：BGM

- **默认生成**
  - 系统在首次生成成片草稿时可默认配一条 BGM
  - 用户可在"背景音乐"入口进行替换/调整
- **两种来源路径**
  - **AI 生成 BGM**
    1. 展示"生成提示词"，用户可自行编辑提示词并`重新生成`，也可以不修改直接`重新生成`
    2. 消耗额度，在触发前展示预计消耗并在不足时提示充钱
  - **用户自定义 BGM**
    1. 从"资产库> 音乐库"选择
    2. 或本地上传音频文件（限制音频文件格式为`.mp4`、`.wav`）
- **试听与应用**
  - 选择任一 BGM 后可立即试听
  - 点击【应用】后替换整片 BGM

## 5 导出与交付

### 5.1 一键导出入口

- **`一键导出`****按钮**：
  - 在剪辑与编排页面右上方，提供一个明确的"导出"按钮，用户点击后进入导出配置面板。
  - 按钮文本为"导出"，点击后在当前页面弹出[导出配置面板](https://zhipu-ai.feishu.cn/wiki/Hcebw1kDhi31DhkmRt4c2QCcnOb#share-Npm2dGwvWo2gW1x2AxYcMAw8nFe)
- **导出配置面板（可选参数与快速预览）**
  - 导出面板提供用户可自定义的参数选项，帮助用户定制视频输出的质量、格式等。
  - **用户可见选项**：
    - **分辨率**：用户可选择视频的分辨率（如 720p、1080p、4K）
    - **格式**：用户可选择视频的输出格式（如 MP4、MOV）
    - **画幅/比例**：用户可选择视频的画幅（如 16:9、9:16、1:1）
    - **字幕选项**：若用户选择启用字幕，可选择是否**烧录字幕**到视频中，并提供**字幕样式**（如字体、颜色、大小）可供选择。
    - **封面**：提供封面是否包含的选项，用户可以选择生成封面图，或使用系统自动生成的封面。
  - 若导出时间较长，提示用户"导出可能需要较长时间，预计完成时间为X分钟"，并允许用户选择继续等待或选择后台导出。
  - 当导出任务完成时，系统会弹出提示框或状态提示："导出完成！您可以下载文件"，并提供以下选项：
    - **下载链接**：用户可直接点击"下载"按钮，下载视频文件到本地，让用户选择下载地址
    - **复制链接**：如果文件存储在云端或平台提供外部链接，提供"复制链接"按钮，便于用户复制并分享。

## 6 资产库

- **资产库分栏设计**

1. **角色库**：用户创建或上传的角色资源，包括人物形象、服装设计、面部特征等。
2. **风格库**：视频创作中的视觉风格（如现代、复古、极简等）和设计元素。
3. **音色库**：用户上传或平台提供的角色配音、旁白音色、背景音乐等音频资源。

- **每个分栏的内容展示（可视化与信息架构）**
  - **角色库**：
    - 展示用户上传或平台推荐的角色形象，角色的名称、创建日期和修改历史都应明确标注。
    - 角色条目可支持分类（如"男性角色"、"女性角色"、"背景角色"等），并支持搜索功能。
    - 鼠标悬停或点击角色后可查看该角色的详细信息、所使用的场景或分镜，并提供一键编辑和删除功能。
  - **风格库**：
    - 显示不同的创作风格模板和设置，用户可以通过分类（如"现代风格"、"复古风格"等）快速浏览风格集合。
    - 每个风格应附带简短描述和示例图，帮助用户更好地理解每种风格的特点与适用场景。
    - 用户可以将已创建的风格保存至此库，方便今后再次使用。
  - **音色库**：
    - 展示所有可用的音色资源，如配音、旁白、背景音乐等。
    - 用户可查看每个音色的描述、使用场景及试听功能，确保音色的选择符合创作需求。
    - 支持音色的分类、搜索功能，并能显示音色的创建时间、修改历史。
- **搜索与筛选功能**
  - **搜索框**：
    - 在每个分栏内提供搜索框，用户可以通过输入关键词（如"角色名"、"风格类别"）快速找到相关资产。
  - **筛选与排序**：
    - 提供多个筛选选项，用户可以根据资产类型（角色、风格等）、创建时间、使用频率等进行筛选。
    - 支持按创建时间、名称、使用频率等多种方式对资产进行排序，提升查找效率。
- **编辑与管理操作**
  - 每个资产条目都支持**编辑**和**删除**操作，用户可对角色、风格、场景等资源进行修改、重命名或替换。
  - 提供批量操作功能，用户可同时选择多个资产进行批量删除或批量归类，提高操作效率。
  - 对于用户上传的文件和自定义资产，支持**版本控制**，保留每个资产的修改历史，确保用户能够查看和回溯历史版本。
- **资产预览与互动体验**
  - **预览功能**：
    - 每个资产条目都支持点击查看或播放预览，用户可以查看角色形象、风格效果的预览图。
    - 在资产的详细视图中，用户可以查看大图、音频试听
